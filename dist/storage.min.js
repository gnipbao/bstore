!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.storage=e()}(this,function(){"use strict";var t=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var e=function(){try{return window.localStorage.setItem("__test__","1"),window.localStorage.removeItem("__test__"),!0}catch(t){return!1}},n=function(t){if("string"==typeof t)try{return JSON.parse(t)}catch(e){return t||void 0}};return new(function(){function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this._data={},this.hasLS=e(),this.hasLS&&(this.storage=window.localStorage)}return t(r,[{key:"get",value:function(t){return this.hasLS?n(this.storage.getItem(t)):this._data.hasOwnProperty(t)?n(this._data[t]):void 0}},{key:"set",value:function(t,e){return this.hasLS?this.storage.setItem(t,function(t){var e="";try{e="string"!=typeof t?JSON.stringify(t):t}catch(t){}return e}(e)):this._data[t]=String(e)}},{key:"remove",value:function(t){return this.hasLS?this.storage.removeItem(t):delete this._data[t]}},{key:"key",value:function(t){return this.hasLS?this.storage.key(t):Object.keys(this._data)[t]||null}},{key:"has",value:function(t){return void 0!==this.get(t)}},{key:"clear",value:function(){return this.hasLS?this.storage.clear():this._data={}}},{key:"forEach",value:function(t){this.hasLS||(this.storage=this._data);for(var e=0;e<this.storage.length;e++){var n=this.key(e);t(n,this.get(n))}}},{key:"getAll",value:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t}}]),r}())});
